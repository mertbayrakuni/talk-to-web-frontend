{% load static %}
{% load l10n %}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% block title %}<title>Anasayfa | Talk to Web ile Kariyerini Tasarla</title>{% endblock %}

    {% block meta_description %}
        <meta name="description"
              content="Talk to Web; UI/UX Tasarım, Grafik Tasarım, Video Efekt, Dijital Pazarlama, Sosyal Medya, 3D Tasarım ve Yazılım alanlarında eğitim veren bağımsız bir kurumdur.">{% endblock %}
    {% block meta_keywords %}
        <meta name="keywords"
              content="UI/UX Tasarım, Grafik Tasarım, Video Efekt, Dijital Pazarlama, Sosyal Medya, 3D Tasarım, Yazılım Eğitimi">{% endblock %}
    <meta name="author" content="Talk to Web">
    <meta name="robots" content="index, follow">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <link rel="canonical" href="https://talktoweb.com/">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="{% static 'frontend/bootstrap-icons/font/bootstrap-icons.min.css' %}" rel="stylesheet">
    <link href="{% static 'frontend/plugins/sweetalert2/dist/sweetalert2.min.css' %}" rel="stylesheet">
    <link href="{% static 'frontend/css/main.css' %}" rel="stylesheet">

    <style>
        body {
            position: relative;
            height: 100%;
            background: #eee;
            font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
            font-size: 14px;
            color: #000;
            margin: 0;
            padding: 0;
        }

        h6 {
            font-family: Inter;
            text-transform: capitalize;
            line-height: 28px;
            letter-spacing: 3px;
            font-weight: 600;
            font-style: normal;
            color: #000248;
            font-size: 16px;
        }

        swiper-container {
            width: 100%;
            height: 100%;
        }

        swiper-slide {
            text-align: center;
            font-size: 18px;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        swiper-slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-content p {
            margin-top: 5px;
            font-size: 12px;
            min-height: 150px;
            max-height: 150px;
        }

        .user-image {
            width: 100px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            margin-top: 10px;
        }

        span.checked {
            color: #FFD400;
            font-size: 18px;
        }

        p.testimonial-message {
            font-size: 18px;
            line-height: 25px;
        }

        .instructor-image {
            /* IE6-9 */
            -webkit-filter: grayscale(100%);
            /* Chrome 19+ & Safari 6+ */
            -webkit-transition: all .6s ease;
            /* Fade to color for Chrome and Safari */
            -webkit-backface-visibility: hidden;
            /* Fix for transition flickering */
        }

        .instructor-image:hover {
            filter: none;
            -webkit-filter: grayscale(0%);
        }

    </style>
    <style>
        /* lock page scroll while open */
        body.tw-modal-open {
            overflow: hidden;
        }

        /* mini card fade in/out */
        .mini-chat {
            transition: opacity .6s ease, transform .6s ease;
        }

        .mini-chat.tw-fade-out {
            opacity: 0;
            transform: scale(.98);
        }

        .mini-chat.tw-fade-in {
            opacity: 1;
            transform: none;
        }

        /* screen focus overlay */
        .tw-overlay {
            position: fixed;
            inset: 0;
            background: rgba(10, 14, 25, .55);
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
            opacity: 0;
            pointer-events: none;
            transition: opacity .40s ease;
            z-index: 3000;
        }

        .tw-overlay.open {
            opacity: 1;
            pointer-events: auto;
        }

        /* animated panel */
        .tw-grow-panel {
            position: fixed;
            left: 0;
            top: 0;
            width: 100px;
            height: 100px;
            background: #fff;
            border-radius: 14px;
            box-shadow: 0 16px 36px rgba(0, 0, 0, .2), 0 4px 12px rgba(0, 0, 0, .08);
            overflow: hidden;
            transition: left .60s ease, top .60s ease,
            width .60s ease, height .60s ease,
            border-radius .60s ease;
            z-index: 3001;

            display: flex;
            flex-direction: column;
        }

        /* inside panel */
        .tw-panel-header {
            padding: 14px 18px;
            font-weight: 700;
            background: linear-gradient(135deg, #4f73ff, #0a1a44);
            color: #fff;
            position: relative;
        }

        .tw-panel-close {
            position: absolute;
            top: 8px;
            right: 10px;
            width: 40px;
            height: 40px;
            border: 0;
            border-radius: 999px;
            background: rgba(255, 255, 255, .25);
            color: #fff;
            font-size: 22px;
            cursor: pointer;
        }

        .tw-panel-body {
            flex: 1;
            overflow: auto; /* show what’s inside instead of hiding it */
            display: flex; /* stack the chatbot vertically */
            flex-direction: column;
        }

        /* let the chatbot fill the panel nicely */
        .tw-panel-body .ttw-chatbot {
            display: flex;
            flex-direction: column;
            width: 100%;
        }

        .tw-panel-body .ttw-chat {
            flex: 1;
            height: auto;
        }

        /* use flexible height, not fixed */


        .tw-panel-body {
            flex: 1;
            overflow: auto;
            display: flex;
            flex-direction: column;
        }

        /* Make the chatbot actually fill the panel */
        .tw-panel-body .chatbot-frame { /* the wrapper you render the partial into */
            display: flex;
            flex: 1;
            min-height: 0; /* critical for flex children to shrink properly */
        }

        .tw-panel-body .ttw-chatbot {
            display: flex;
            flex-direction: column;
            flex: 1; /* stretch to fill panel height */
            min-height: 0;
        }

        /* Let the chat log take remaining space even when empty */
        .tw-panel-body .ttw-chat {
            flex: 1;
            min-height: 320px; /* so you see a real area even before messages */
            height: auto; /* override default fixed height */
        }
    </style>
    <script>
        // Note: You must update this URL whenever your ngrok tunnel address changes.
        window.TTW_WS = "wss://f5a97f8b9272.ngrok-free.app/ws";
    </script>
</head>
<body>
<div id="page-content" class="site">
    <div id="content" class="site-content">
        {% include "frontend/header.html" %}

        <div class="whatsapp">
            <a href="https://wa.me/{{ WHATSAPP_NUMBER }}" target="_blank" class="btn btn-success btn-circle"
               id="whatsappButton">
                <i class="bi bi-whatsapp"></i>
            </a>
        </div>
        {% block main_content %}

        {% endblock %}

        {% block statistics %}
            <div class="container-fluid numaralar-section my-5">
                <div class="inner-wrapper">
                    <div class="container student-video-style">
                        <div class="col-7 d-flex flex-column justify-content-center stats-numbers">
                            <h5 class="section-title text-center mb-4">Kariyeriniz İçin En Doğru Adım</h5>
                            <div class="d-flex justify-content-between w-100">
                                <div class="text-center number-box">
                                    <h2>{{ frontend.completed_educations|localize }}</h2>
                                    <p>Tamamlanan Eğitim</p>
                                </div>
                                <div class="text-center number-box">
                                    <h2>{{ frontend.approved_educations|localize }}</h2>
                                    <p>Onaylanmış Eğitim</p>
                                </div>
                                <div class="text-center number-box">
                                    <h2>{{ frontend.total_alumni|localize }}+</h2>
                                    <p>Mezun Öğrenci</p>
                                </div>
                                <div class="text-center number-box">
                                    <h2>{{ frontend.pleasure|localize }}%</h2>
                                    <p>Memnuniyet</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-1"></div>
                        <div class="col-4 stats-form">
                            <div class="card p-4">
                                <h4 class="mb-4">Kendinden Bahset</h4>
                                {% include 'frontend/biz_sizi_arayalim2.html' %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endblock %}
        {% block testimonials %}
            <div class="container my-5">
                <h4 class="text-center mb-4">Öğrencilerimiz hakkımızda ne düşünüyor?</h4>
                <div class="row">
                    <swiper-container class="testimonialSwiper" init="false" autoplay-delay="2500">
                        {% for testimonial in testimonials %}
                            <swiper-slide style="border-radius: 10px;">
                                <div class="card p-3 text-center px-4 testimonial-item">

                                    <div class="testimonial-content">
                                        <h5 class="mb-0 testimonial-title">{{ testimonial.title }}</h5>
                                        <p class="testimonial-message">{{ testimonial.message }}</p>
                                    </div>

                                    <div class="ratings">
                                        <span class="{% if testimonial.rate >= 1 %}checked{% endif %}"><i
                                                class="fa fa-star"></i></span>
                                        <span class="{% if testimonial.rate >= 2 %}checked{% endif %}"><i
                                                class="fa fa-star"></i></span>
                                        <span class="{% if testimonial.rate >= 3 %}checked{% endif %}"><i
                                                class="fa fa-star"></i></span>
                                        <span class="{% if testimonial.rate >= 4 %}checked{% endif %}"><i
                                                class="fa fa-star"></i></span>
                                        <span class="{% if testimonial.rate >= 5 %}checked{% endif %}"><i
                                                class="fa fa-star"></i></span>

                                    </div>
                                    <div class="user-image" style="text-align: center">
                                        <img src="{{ testimonial.avatar.original }}" alt="{{ testimonial.slug }}"
                                             class="rounded-circle" width="60">
                                    </div>
                                    <div class="user-content">
                                        <h5 class="mb-0">{{ testimonial.profession }}</h5>
                                        <span>{{ testimonial.name }}</span>
                                    </div>


                                </div>

                            </swiper-slide>
                        {% endfor %}
                    </swiper-container>
                </div>
            </div>
        {% endblock %}

    </div>
</div>


{% include "frontend/footer.html" %}

<script src="{% static 'frontend/plugins/jquery/dist/jquery.min.js' %}"></script>
<script src="{% static 'frontend/plugins/fontawesome/js/all.min.js' %}"></script>
<script src="{% static 'frontend/plugins/sweetalert2/dist/sweetalert2.all.min.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-element-bundle.min.js"></script>
<script src="https://www.google.com/recaptcha/api.js?render=6LdvUOcqAAAAAMTkthljNCSeYCDlpgZwBo38Mfon"></script>
<script>
    $body = $('body');
    $body.on("click", "#let_call_you_submit_btn, #let_call_you_2_submit_btn", function (e) {
        e.preventDefault();
        let myForm = $(this).closest("form")[0];
        if (myForm) {
            let formData = new FormData(myForm);
            let formObject = {};

            grecaptcha.ready(function () {
                grecaptcha.execute('6LdvUOcqAAAAAMTkthljNCSeYCDlpgZwBo38Mfon', {
                    action: 'submit'
                }).then(function (token) {
                    formData.append('token', token);
                    //console.log([...formData]); // Debugging
                    // Convert FormData to JSON
                    formData.forEach((value, key) => {
                        formObject[key] = value;
                    });

                    let jsonData = JSON.stringify(formObject); // Convert to JSON string
                    $.ajax({
                        url: "{{ API_ROOT }}/api/messages-from-frontend",
                        data: jsonData,
                        type: 'POST',
                        contentType: "application/json",
                        dataType: "json",
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': '{{csrf_token }}',
                        },
                        beforeSend: function (xhr, settings) {
                            ajax_loading = true;
                            $("#loading").show();
                            if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                                // Only send the token to relative URLs i.e. locally.
                                xhr.setRequestHeader("X-CSRFToken", '{{csrf_token }}');
                            }
                        },
                        success: function (response) { // handle a successful response
                            ajax_loading = false;
                            $("#loading").hide();
                            $(myForm).parent().hide();
                            Swal.fire({
                                title: "Başarılı !!",
                                html: 'Mesajınızı aldık. Danışmanlarımız en kısa sürede size ulaşacaktır.',
                                icon: "success",
                            });
                            $("#loading").hide();

                        },
                        error: function (response) { // handle a non-successful response
                            const json = response.responseJSON.message;
                            ajax_loading = false;
                            $("#loading").hide();
                            toastr.options.closeButton = true;
                            toastr.options.positionClass = 'toast-top-right';
                            toastr["error"](JSON.stringify(json));
                        }
                    });
                });
            });
        } else {
            console.error("Form not found");
        }
    });


</script>


<script>
    const swiperEl = document.querySelector('.testimonialSwiper')
    if (swiperEl) {
        Object.assign(swiperEl, {
            slidesPerView: 1,
            spaceBetween: 4,
            pagination: {
                clickable: true,
            },
            breakpoints: {
                640: {
                    slidesPerView: 2,
                    spaceBetween: 10,
                },
                768: {
                    slidesPerView: 3,
                    spaceBetween: 10,
                },
                1024: {
                    slidesPerView: 4,
                    spaceBetween: 10,
                },
            },
        });
        swiperEl.initialize();
    }
</script>
<script>
    const startTime = Date.now();


    document.addEventListener('DOMContentLoaded', async function () {
        const menuButton = document.querySelector('.icon-menu-button');
        const backButton = this.getElementById('menuBack');
        const header = document.getElementById('header-cont');
        const offcanvas = document.querySelector('.offcanvas-custom');
        const blogCardElements = document.querySelectorAll('.blog-section .card');
        const categoryCounts = {};
        const contactForm = document.getElementById('contactForm');
        const successMessage = document.getElementById('successMessage');
        const statsSuccessMessage = document.createElement('div');
        const menuButtonIcon = document.getElementById('menuButtonIcon');
        const menuButtonText = document.getElementById('menuButtonText');
        const CourseSelect = document.getElementById('educationForm')
        const container = document.getElementById('MainCourses');


        document.getElementById('menuButton').addEventListener('click', function () {
            if (document.getElementById('offcanvasScrolling').classList.contains('show')) {
                document.getElementById('menuButtonText').innerText = 'MENÜ'
            } else {
                document.getElementById('menuButtonText').innerText = 'KAPAT'
            }
        })

        offcanvas.addEventListener('show.bs.offcanvas', function () {
            if (menuButtonIcon) {
                menuButtonIcon.classList.remove('bi-list');
                menuButtonIcon.classList.add('bi-x');
            }
        });

        offcanvas.addEventListener('hide.bs.offcanvas', function () {
            if (menuButtonIcon) {
                menuButtonIcon.classList.remove('bi-x');
                menuButtonIcon.classList.add('bi-list');
            }
        });

        blogCardElements.forEach(function (card) {
            const badge = card.querySelector('.badge');
            if (badge) {
                const category = badge.textContent.trim();
                if (categoryCounts[category]) {
                    categoryCounts[category]++;
                } else {
                    categoryCounts[category] = 1;
                }
            }
        });

        const categoryListItems = document.querySelectorAll('.side-content .text-categories');

        categoryListItems.forEach(function (item) {
            const categoryName = item.textContent.split(' (')[0].trim();
            if (categoryCounts[categoryName]) {
                item.textContent = `${categoryName} (${categoryCounts[categoryName]})`;
            }
        });

        function adjustOffcanvas() {
            const headerHeight = header.offsetHeight;
            offcanvas.style.top = `${headerHeight}px`;
            offcanvas.style.height = `calc(100% - ${headerHeight}px)`;
        }

        //adjustOffcanvas();
        window.addEventListener('resize', adjustOffcanvas);

        if (!localStorage.getItem('lastSelectedSection')) {
            localStorage.setItem('lastSelectedSection', 'educations');
        }
        setActiveSection(localStorage.getItem('lastSelectedSection'));
        if (window.innerWidth >= 768) {
            document.addEventListener('click', function (event) {
                const offcanvas = document.getElementById('offcanvasScrolling');
                const offcanvasButton = document.getElementById('menuButton')
                const offcanvasCloseBtn = document.getElementById('btn-close')

                if (offcanvasCloseBtn.contains(event.target)) {
                    offcanvasButton.click();
                    return;
                }

                if (offcanvas.contains(event.target) || offcanvasButton.contains(event.target)) {
                    return;
                }

                if (offcanvas.classList.contains('show')) {
                    offcanvasButton.click();
                }
            });
        }

        function adjustOffcanvasForMobile() {
            const offcanvasContent = document.getElementById('offcanvas-content');
            const offcanvasHeader = document.getElementById('offcanvas-header');

            if (window.innerWidth <= 768) {
                offcanvasContent.classList.remove('col-10');
                offcanvasContent.classList.add('d-none');
                offcanvasHeader.classList.remove('col-2');

                document.querySelector('.btn-student-mobile').parentElement.parentElement.classList.remove('d-none')

                document.getElementById("homeLink").classList.add('d-none')

                document.querySelectorAll('.header-link').forEach((element) => {
                    element.addEventListener('click', function (e) {
                        e.preventDefault();
                        const selectedSection = element.getAttribute('data-content');
                        if (selectedSection) {
                            localStorage.setItem('lastSelectedSection', selectedSection);
                            setActiveSection(selectedSection);

                            document.getElementById('offcanvas-content').classList.remove('d-none');
                            setTimeout(() => {
                                document.getElementById('offcanvas-content').classList.add('show');
                            }, 1);
                            menuButton.classList.add('d-none');
                            backButton.classList.remove('d-none');
                        }
                    });
                });

                backButton.addEventListener('click', function () {
                    document.getElementById('offcanvas-content').classList.remove('show');
                    setTimeout(() => {
                        document.getElementById('offcanvas-content').classList.add('d-none');
                    }, 350);
                    menuButton.classList.remove('d-none');
                    backButton.classList.add('d-none');
                });
            } else {
                offcanvasContent.classList.add('col-10');
                offcanvasContent.classList.remove('col', 'd-none');
                offcanvasHeader.classList.add('col-2');
                offcanvasHeader.classList.remove('col');
            }
        }

        adjustOffcanvasForMobile();
        window.addEventListener('resize', adjustOffcanvasForMobile);

        document.addEventListener('scroll', function () {
            const topHeader = document.querySelector('.top-header');
            const links = topHeader.querySelectorAll('a');
            const navbar = document.querySelector('.navbar-custom');
            const brand = document.querySelector('.navbar-brand');
            const homeButtons = document.querySelectorAll('.icon-home-button');
            const logos = document.querySelectorAll('#navbarLogo, #navbarLogoMobile');
            const houseIcons = document.querySelectorAll('.house-icon');
            const logoText = document.querySelectorAll('.logo-font-style');

            if (window.scrollY > 50) {
                topHeader.classList.add('scrolled');
                document.querySelector('.info-text').classList.add('scrolled')
                links.forEach(link => {
                    if (link.classList.contains('youtube')) {
                        link.style.color = '#FF0000'; // YouTube kırmızı
                    } else if (link.classList.contains('instagram')) {
                        link.style.color = '#C13584'; // Instagram pembe
                    } else if (link.classList.contains('linkedin')) {
                        link.style.color = '#0077B5'; // LinkedIn mavi
                    }
                });
                navbar.classList.add('navbar-scrolled');
                brand.classList.add('scrolled');
                homeButtons.forEach(button => button.classList.add('scrolled'));
                logos.forEach(logo => {
                    logo.src = '{{ frontend.logo_white.original }}';
                });
                houseIcons.forEach(icon => icon.classList.add('scrolled'));
                logoText.forEach(text => text.classList.add('scrolled'));
            } else {
                topHeader.classList.remove('scrolled');
                document.querySelector('.info-text').classList.remove('scrolled')
                links.forEach(link => {
                    if (link.classList.contains('youtube')) {
                        link.style.color = ''; // Varsayılan renk
                    } else if (link.classList.contains('instagram')) {
                        link.style.color = ''; // Varsayılan renk
                    } else if (link.classList.contains('linkedin')) {
                        link.style.color = ''; // Varsayılan renk
                    }
                });
                navbar.classList.remove('navbar-scrolled');
                brand.classList.remove('scrolled');
                homeButtons.forEach(button => button.classList.remove('scrolled'));
                logos.forEach(logo => {
                    logo.src = '{{ frontend.logo.original }}';
                });
                houseIcons.forEach(icon => icon.classList.remove('scrolled'));
                logoText.forEach(text => text.classList.remove('scrolled'));
            }
        });


        document.querySelectorAll('[data-bs-toggle="offcanvas"]').forEach((element) => {
            element.addEventListener('click', function () {
                const offcanvasId = element.getAttribute('data-bs-target');
                const offcanvasElement = document.querySelector(offcanvasId);
                offcanvasElement.classList.toggle('show');
            });
        });

        document.querySelectorAll('[data-bs-dismiss="offcanvas"]').forEach((element) => {
            element.addEventListener('click', function () {
                const offcanvasElement = element.closest('.offcanvas-custom');
                offcanvasElement.classList.remove('show');
            });
        });

        document.querySelectorAll('.header-link').forEach((element) => {
            element.addEventListener('click', function (e) {
                e.preventDefault();
                const selectedSection = element.getAttribute('data-content');
                if (selectedSection) {
                    localStorage.setItem('lastSelectedSection', selectedSection);
                    setActiveSection(selectedSection);
                } else {
                    const linkId = element.id;
                    if (linkId === 'homeLink') {
                        window.location.href = '#';
                    }
                }
            });
        });

        function setActiveSection(sectionId) {
            document.querySelectorAll('.header-link').forEach((link) => {
                if (!link.parentElement.classList.contains('home-icon-container')) {
                    link.parentElement.style.backgroundColor = '';
                }
            });
            const activeLink = document.querySelector(`.header-link[data-content="${sectionId}"]`);
            if (activeLink && !activeLink.parentElement.classList.contains('home-icon-container')) {
                activeLink.parentElement.style.backgroundColor = '#4898C0';
            }

            document.querySelectorAll('.content-section').forEach((section) => {
                section.classList.add('d-none');
            });
            const activeSection = document.getElementById(sectionId);
            if (activeSection) {
                activeSection.classList.remove('d-none');
            }
        }


        async function createNoticeCard(notice) {
            const noticeCardContainer = document.createElement('div');
            noticeCardContainer.classList.add('col-lg-3', 'col-md-6', 'mb-4', 'event-card-container');

            const noticeCard = document.createElement('div');
            noticeCard.classList.add('event-card');

            const img = document.createElement('img');
            img.src = notice.imageUrl;
            img.classList.add('img-fluid', 'rounded-start');
            img.alt = notice.NoticeName;

            const imgLink = document.createElement('a');
            imgLink.href = notice.NoticeTopic;
            imgLink.appendChild(img);

            // Duyuru başlığı için div oluştur
            const titleDiv = document.createElement('div');
            titleDiv.classList.add('card-title');
            titleDiv.textContent = notice.NoticeName;

            // Tarih ve yorum bilgisi için div oluştur
            const dateDiv = document.createElement('div');
            dateDiv.classList.add('card-text');
            dateDiv.textContent = "Tarih: " + new Date(notice.Date).toLocaleDateString('tr-TR');

            // Duyuruya git butonu
            const link = document.createElement('a');
            link.href = notice.NoticeTopic;
            link.classList.add('btn', 'btn-primary', 'btn-sm');
            link.textContent = 'Duyuruya Git';

            // Kart içeriklerini noticeCard'a ekle
            noticeCard.appendChild(imgLink);
            noticeCard.appendChild(titleDiv);
            noticeCard.appendChild(dateDiv);
            noticeCard.appendChild(link);

            // Ana container'a kartı ekle
            noticeCardContainer.appendChild(noticeCard);

            // DOM'a kartı ekle
            const announcementsRow = document.getElementById('announcementsRow');
            const allEducationCard = document.getElementById('announcementsButton');
            announcementsRow.insertBefore(noticeCardContainer, allEducationCard);
        }


        async function createBlogCard(blog) {
            const blogDiv = document.createElement('div');
            blogDiv.classList.add('col-lg-4', 'col-md-6', 'col-sm-12', 'mb-4', 'blog-item');

            const blogCard = document.createElement('div');
            blogCard.classList.add('card', 'h-100');

            const img = document.createElement('img');
            img.src = blog.imageUrl;
            img.classList.add('card-img-top');
            img.alt = blog.BlogName;

            const cardBody = document.createElement('div');
            cardBody.classList.add('card-body');

            const title = document.createElement('h5');
            title.classList.add('card-title', 'text-white');

            // Blog ismini URL dostu hale getirmek için fonksiyonu kullan
            const formattedBlogName = formatName(blog.BlogName);

            const titleLink = document.createElement('a');
            titleLink.href = `{{ROOT}}/blog/${formattedBlogName}`;
            titleLink.classList.add('text-white', 'text-decoration-none');
            titleLink.textContent = capitalizeWords(blog.BlogName);

            const categoryBadge = document.createElement('span');
            categoryBadge.classList.add('badge', 'bg-secondary', 'mb-2');
            categoryBadge.textContent = blog.CategoryName;

            cardBody.appendChild(categoryBadge);
            title.appendChild(titleLink);
            cardBody.appendChild(title);

            const text = document.createElement('p');
            text.classList.add('card-text');
            text.innerHTML = blog.BlogTopic.length > 150 ? blog.BlogTopic.slice(0, 150) + '...' : blog.BlogTopic;

            cardBody.appendChild(text);

            const readMoreLink = document.createElement('a');
            readMoreLink.href = `{{ROOT}}/blog/${formattedBlogName}`;
            readMoreLink.classList.add('btn', 'btn-primary', 'mt-3');
            readMoreLink.textContent = 'Devamını Oku';

            cardBody.appendChild(readMoreLink);

            blogCard.appendChild(img);
            blogCard.appendChild(cardBody);
            blogDiv.appendChild(blogCard);

            const blogRow = document.getElementById('blogRow');
            if (blogRow) {
                blogRow.appendChild(blogDiv);
            }
        }


        const apiUrl = "{{ API_ROOT }}";
        const csrfToken = "{{ csrf_token }}";


        async function fetchNotices() {
            try {
                const response = await fetch(`${apiUrl}/api/notice`, {
                    headers: {
                        'X-CSRFToken': csrfToken
                    }
                });
                const notices = await response.json();
                if (notices) {
                    notices.forEach(createNoticeCard);
                }
            } catch (error) {
                console.error("Duyurular getirilirken bir hata oluştu:", error);
            }
        }

        async function fetchBlogs() {
            try {
                const response = await fetch(`${apiUrl}/api/blog`, {
                    headers: {
                        'X-CSRFToken': csrfToken
                    }
                });
                const blogs = await response.json();
                if (blogs) {
                    blogs.forEach(createBlogCard);
                }
            } catch (error) {
                console.error("Bloglar getirilirken bir hata oluştu:", error);
            }
        }

        async function getEducationList() {
            const formData = new FormData(CourseSelect);
            const selectedCourseType = formData.get('course_type');
            try {
                const educationListResponse = await fetch(`${apiUrl}/api/education-list?course_type=${selectedCourseType}`, {
                    headers: {
                        'X-CSRFToken': csrfToken
                    }
                });
                if (!educationListResponse.ok) {
                    throw new Error('Eğitim listesi getirilirken bir hata oluştu.');
                }
                const educationList = await educationListResponse.json();
                renderEducationList(educationList);
            } catch (error) {
                console.error("Eğitim listesi getirilirken bir hata oluştu:", error);
            }
        }


        function renderEducationList(educationList) {
            container.innerHTML = '';
            educationList.forEach(course_group => {
                const div = document.createElement('div');
                div.classList.add('col-lg-3', 'col-md-6');
                div.innerHTML = `
                    <div class="card shadow-lg h-100 course-card">
                        <div class="card-body">
                            ${course_group.label ? `<div class="course-group">${course_group.label}</div>` : ''}
                            <a href="{{ ROOT }}/egitimler/${course_group.slug}">
                                <img class="card-img-top" alt="${course_group.slug}"
                                     src="${course_group.main_image.original}" data-no-retina=""
                                     style="height: 200px">
                            </a>
                            <h5 class="card-title">${course_group.name}</h5>
                            <div style="max-font-size: 200px;height: 200px;overflow-y: scroll">
                                ${course_group.description}
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }


        function capitalizeWords(str) {
            // Veriyi küçük harfe çevirir ve sonra her kelimenin baş harfini büyük yapar
            return str
                .toLowerCase('tr-TR')  // Türkçe karakterler için küçük harfe çevirme
                .replace(/(^|\s)\S/g, function (char) {
                    return char.toUpperCase('tr-TR');  // Türkçe karakterler için baş harfi büyük yapma
                });
        }

        function formatName(courseName) {
            return courseName
                .toLowerCase() // Tüm harfleri küçük harfe çevir
                .replace(/ö/g, 'o') // Türkçe karakterleri dönüştür
                .replace(/ü/g, 'u')
                .replace(/ş/g, 's')
                .replace(/ç/g, 'c')
                .replace(/ı/g, 'i')
                .replace(/ğ/g, 'g')
                .replace(/[^a-z0-9\s]/g, '') // Özel karakterleri kaldır
                .replace(/\s+/g, '-') // Boşlukları '-' ile değiştir
                .trim(); // Baş ve sondaki boşlukları kaldır
        }

    });


    const endTime = Date.now();
    const elapsedTime = (endTime - startTime) / 1000;
    console.log(`Toplam süre: ${elapsedTime.toFixed(2)} saniye`);

    function detectIdType(id) {
        if (/^[0-9a-fA-F]{24}$/.test(id)) {
            return 'Mongo ObjectId';
        }
        if (/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(id)) {
            return 'UUID';
        }
        if (id.includes('.')) {
            return 'File with extension';
        }
        return 'Other';
    }
</script>
{% block js %}{% endblock %}
</body>
</html>